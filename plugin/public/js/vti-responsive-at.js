function toUnixDate(a){var b=moment(a,"DD.MM.YY").unix();return b}function AddFilter(e,d,g){var f=($("#filterlist tbody tr").length).toString();$("#filterlist").append("<tr id='f"+f+"' style='display:none'> 	<td class='nopadding'> 		<select class='FT form-control' id='ft"+f+"' > 			<option value='include'>"+tstr_at_filter_include+"</option> 			<option value='exclude'>"+tstr_at_filter_exclude+"</option> 		</select> 	</td> 	<td class='nopadding'> 		<select class='FM form-control' id='fm"+f.toString()+"' > 			<option value='title' selected=''>"+tstr_at_filter_title+"</option> 			<option value='shortdescription'>"+tstr_at_filter_short_desc+"</option> 			<option value='description'>"+tstr_at_filter_desc+"</option> 			<option value='dayofweek'>"+tstr_at_filter_day+"</option> 			</select> 	</td> 	<td> 		<div class='form-line inactive' id='filine"+f+"'> 			<input type='text' class='FI form-control' size='20' value='' style='display: block;' id='fi"+f+"'> 		</div> 		<div id='fsline"+f+"'> 			<select class='FS' style='display: none;' id='fs"+f+"' > 				<option value='0' selected=''>"+tstr_monday+"</option> 				<option value='1'>"+tstr_tuesday+"</option> 				<option value='2'>"+tstr_wednesday+"</option> 				<option value='3'>"+tstr_thursday+"</option> 				<option value='4'>"+tstr_friday+"</option> 				<option value='5'>"+tstr_saturday+"</option> 				<option value='6'>"+tstr_sunday+"</option> 				<option value='weekend'>"+tstr_weekend+"</option> 				<option value='weekday'>"+tstr_weekday+"</option> 			</select> 		</div> 	</td> 	<td> 		<input type='checkbox' class='FR form-control' id='fr"+f+"'> 		<label for='fr"+f+"'>"+tstr_at_del+"</label> 	</td> </tr>");if(e!=""){$("#ft"+f).val(e)}if(d!=""){$("#ft"+f).attr("disabled",true);$("#fs"+f).attr("disabled",true);$("#fm"+f).attr("disabled",true);$("#fi"+f).attr("disabled",true);if(d=="dayofweek"){$("#fm"+f).val(d);$("#fi"+f).hide();$("#filine"+f).hide();$("#fs"+f).val(g);$("#fs"+f).show()}else{$("#fm"+f).val(d);$("#fs"+f).hide();$("#fsline"+f).hide();$("#fi"+f).val(g);$("#fi"+f).show()}}if(e===""&&d===""){$.AdminBSB.select.activate()}$("#f"+f).show()}function initValues(){var d=$("#maxduration");var c=$("#counter");var b=$("#left");for(var a=0;a<100;a++){var g=a.toString();if(a<10){g="0"+g}c.append($("<option></option>").val(a).html(g));b.append($("<option></option>").val(a).html(g))}for(var a=0;a<1000;a++){var g=a.toString();if(a<10){g="0"+g}d.append($("<option></option>").val(a).html(g))}$("#tafter").val("5");$("#tbefore").val("5");$("#maxduration").val("70");$("#after").datetimepicker({format:"dd.mm.yy",initialDate:e,autoclose:true,minView:2,});$("#after").datetimepicker().on("changeDate",function(h){var j=moment($("#before").val(),"DD.MM.YY").unix();var k=moment($("#after").val(),"DD.MM.YY").unix();if(j<k){showError("AFTER:"+tstr_start_after_end)}else{showError("")}});var e=new Date();$("#after").val(moment(e).format("DD.MM.YY"));var f=new Date();f.setDate(e.getDate()+7);$("#from").val("20:15");$("#to").val("23:15");$("#aefrom").val("20:15");$("#aeto").val("23:15");$("#before").datetimepicker({format:"dd.mm.yy",initialDate:e,autoclose:true,minView:2,});$("#before").datetimepicker().on("changeDate",function(h){var j=moment($("#before").val(),"DD.MM.YY").unix();var k=moment($("#after").val(),"DD.MM.YY").unix();if(j<k){showError("BEFORE:"+tstr_start_after_end)}else{showError("")}});$("#before").val(moment(f).format("DD.MM.YY"))}function timeFrameAfterCheck(){if($("#timeFrameAfter").is(":checked")===true){var a=moment($("#after").val(),"DD.MM.YY").toDate();var c=new Date(a);var b=new Date();b.setDate(c.getDate()+7);a=moment(b).format("DD.MM.YY");$("#before").val(a);$("#beforeE").show()}else{var c=new Date(2038,0,1);var a=moment(c).format("DD.MM.YY");$("#before").val(a);$("#beforeE").hide()}}function AutoTimerObj(b){this.isNew=false;this.MustSave=false;this.id=b.attr("id");this.enabled=(b.attr("enabled")=="yes");this.name=b.attr("name");if(!this.name){this.name=""}this.match=b.attr("match");if(!this.match){this.match=""}this.searchType="partial";if(b.attr("searchType")){this.searchType=b.attr("searchType")}this.searchCase="insensitive";if(b.attr("searchCase")){this.searchCase=b.attr("searchCase")}this.justplay="0";if(b.attr("justplay")){this.justplay=b.attr("justplay")}this.overrideAlternatives=(b.attr("overrideAlternatives")=="1");this.timeSpan=false;if(b.attr("from")&&b.attr("to")){this.from=b.attr("from");this.to=b.attr("to");this.timeSpan=true}this.maxduration=null;if(b.attr("maxduration")){this.maxduration=b.attr("maxduration")}if(b.attr("after")&&b.attr("before")){var a=parseInt(b.attr("after"));var j=new Date(a*1000);this.after=moment(j).format("DD.MM.YY");a=parseInt(b.attr("before"));j=new Date(a*1000);this.before=moment(j).format("DD.MM.YY");this.timeFrame=true}else{this.before=null;this.after=null;this.timeFrame=false}this.avoidDuplicateDescription="0";if(b.attr("avoidDuplicateDescription")){this.avoidDuplicateDescription=b.attr("avoidDuplicateDescription")}this.location=null;if(b.attr("location")){this.location=b.attr("location")}this.timerOffset=false;if(b.attr("offset")){var e=b.attr("offset").split(",");var g=e[0];var h=e[1];if(typeof h==="undefined"){this.timerOffsetAfter=g;this.timerOffsetBefore=g}else{this.timerOffsetAfter=h;this.timerOffsetBefore=g}this.timerOffset=true}var d=b.find("afterevent");this.afterevent=null;if(d.text()){this.afterevent=d.text();if(d.attr("from")&&d.attr("to")){this.aftereventfrom=d.attr("from");this.aftereventto=d.attr("to")}else{this.aftereventfrom=null;this.aftereventto=null}}var f=[];var g=[];b.find("e2service").each(function(){var k=$(this).find("e2servicereference").text();if(isBQ(k)){g.push(encodeURIComponent(k))}else{f.push(k)}});this.Channels=f.slice();this.Bouquets=g.slice();g=[];b.find("e2tags").each(function(){var k=$(this).text();g.push(encodeURIComponent(k))});this.Tags=g.slice();var c=[];b.find("include").each(function(){c.push({t:"include",w:$(this).attr("where"),v:$(this).text()})});b.find("exclude").each(function(){c.push({t:"exclude",w:$(this).attr("where"),v:$(this).text()})});this.Filters=c.slice();this.counter=b.attr("counter");if(!this.counter){this.counter="0"}this.left=b.attr("left");if(!this.left){this.left="0"}this.counterFormat=b.attr("counterFormat");if(!this.counterFormat){this.counterFormat=""}this.vps=false;this.vpso=false;if(b.attr("vps_enabled")==="yes"){this.vps=true;if(b.attr("vps_overwrite")==="yes"){this.vpso=true}}this.series_labeling=false;if(b.attr("series_labeling")==="yes"){this.series_labeling=true}}AutoTimerObj.prototype.UpdateUI=function(){$("#filterlist").empty();$("#enabled").prop("checked",this.enabled);$("#name").val(this.name);$("#match").val(this.match);$("#searchType").val(this.searchType);$("#searchCase").val(this.searchCase);$("#justplay").val(this.justplay);$("#overrideAlternatives").prop("checked",this.overrideAlternatives);$("#timeSpan").prop("checked",this.timeSpan);$("#at_name").html("("+this.name+")");if(this.timeSpan){$("#from").val(this.from);$("#to").val(this.to)}if(this.maxduration){$("#maxDuration").prop("checked",true);$("#maxduration").val(this.maxduration)}else{$("#maxDuration").prop("checked",false)}$("#timeFrame").prop("checked",this.timeFrame);if(this.timeFrame){$("#after").val(this.after);$("#before").val(this.before);var e=moment($("#before").val(),"DD.MM.YY").toDate();var b=new Date(2038,0,1);if(e<b){$("#timeFrameAfter").prop("checked",true);$("#beforeE").show()}else{$("#timeFrameAfter").prop("checked",false);$("#beforeE").hide()}}$("#avoidDuplicateDescription").val(this.avoidDuplicateDescription);if(this.location){$("#location").val(this.location);if(this.location!==$("#location").val()){current_location="<option value='"+this.location+"'>"+this.location+"</option>";$("#location").append(current_location);$("#location").val(this.location)}$("#Location").prop("checked",true)}else{$("#Location").prop("checked",false)}$("#timerOffset").prop("checked",this.timerOffset);if(this.timerOffset){$("#tafter").val(this.timerOffsetAfter);$("#tbefore").val(this.timerOffsetBefore)}$("#timeSpanAE").prop("checked",false);$("#afterevent").val("");if(this.afterevent){$("#afterevent").val(this.afterevent);if(this.aftereventfrom&&this.aftereventto){$("#aefrom").val(this.aftereventfrom);$("#aeto").val(this.aftereventto);$("#timeSpanAE").prop("checked",true)}}$("#channels").val(null);$("#bouquets").val(null);$.each(this.Bouquets,function(c,g){$('#bouquets option[value="'+g+'"]').prop("selected",true)});$.each(this.Channels,function(c,g){$('#channels option[value="'+g+'"]').prop("selected",true)});$("#bouquets").selectpicker("refresh");$("#channels").selectpicker("refresh");$("#Bouquets").prop("checked",(this.Bouquets.length>0));$("#Channels").prop("checked",(this.Channels.length>0));$("#tags").val(null);$.each(this.Tags,function(c,g){$('#tags option[value="'+g+'"]').prop("selected",true)});$("#tags").selectpicker("refresh");var d=$("#filterlist tr").length;if(d>1){for(var a=1;a<d;a++){$("#f"+a.toString()).remove()}}var f=0;$.each(this.Filters,function(c,g){f++;AddFilter(g.t,g.w,g.v)});$.AdminBSB.select.activate();$("#Filter").prop("checked",(f>0));$("#counter").val(this.counter);$("#left").val(this.left);$("#counterFormat").val(this.counterFormat);$("#vps").prop("checked",this.vps);$("#vpssm").prop("checked",!this.vpso);$("#series_labeling").prop("checked",this.series_labeling);checkValues()};function saveAT(){if(CurrentAT){var g="/autotimer/edit?";CurrentAT.enabled=$("#enabled").is(":checked");CurrentAT.name=$("#name").val();CurrentAT.match=$("#match").val();CurrentAT.searchType=$("#searchType").val();CurrentAT.searchCase=$("#searchCase").val();CurrentAT.justplay=$("#justplay").val();CurrentAT.overrideAlternatives=$("#overrideAlternatives").is(":checked");CurrentAT.timeSpan=$("#timeSpan").is(":checked");CurrentAT.avoidDuplicateDescription=$("#avoidDuplicateDescription").val();CurrentAT.timeSpan=$("#timeSpan").is(":checked");CurrentAT.from=$("#from").val();CurrentAT.to=$("#to").val();CurrentAT.timerOffset=$("#timerOffset").is(":checked");CurrentAT.before=$("#before").val();CurrentAT.after=$("#after").val();if($("#maxDuration").is(":checked")){CurrentAT.maxduration=$("#maxduration").val()}else{CurrentAT.maxduration=null}if($("#Location").is(":checked")){CurrentAT.location=$("#location").val()}else{CurrentAT.location=null}CurrentAT.timeFrame=$("#timeFrame").is(":checked");CurrentAT.timerOffsetBefore=$("#tbefore").val();CurrentAT.timerOffsetAfter=$("#tafter").val();CurrentAT.afterevent=$("#afterevent").val();CurrentAT.aftereventfrom=$("#aefrom").val();CurrentAT.aftereventto=$("#aeto").val();CurrentAT.Bouquets=$("#bouquets").val();CurrentAT.Channels=$("#channels").val();var f=[];for(i=0;i<$("#filterlist tr").length;i++){var j=$("#ft"+i.toString()).val();var c=$("#fm"+i.toString()).val();var d=$("#fi"+i.toString()).val();var a=$("#fs"+i.toString()).val();var b=$("#fr"+i.toString()).is(":checked")?true:false;if(b===false){if(c==="dayofweek"){f.push({t:j,w:c,v:a})}else{f.push({t:j,w:c,v:d})}}else{f.push({t:j,w:c,v:""})}}CurrentAT.Filters=f.slice();CurrentAT.Tags=$("#tags").val();CurrentAT.counter=$("#counter").val();CurrentAT.left=$("#left").val();CurrentAT.counterFormat=$("#counterFormat").val();CurrentAT.vps=$("#vps").is(":checked");CurrentAT.vpso=!$("#vpssm").is(":checked");CurrentAT.series_labeling=$("#series_labeling").is(":checked");g+="match="+encodeURIComponent(CurrentAT.match);g+="&name="+encodeURIComponent(CurrentAT.name);g+="&enabled=";g+=(CurrentAT.enabled)?"1":"0";g+="&justplay="+CurrentAT.justplay;g+="&setEndtime=";g+=(CurrentAT.setEndtime)?"1":"0";g+="&searchCase="+CurrentAT.searchCase;g+="&overrideAlternatives=";g+=(CurrentAT.overrideAlternatives)?"1":"0";g+="&avoidDuplicateDescription="+CurrentAT.avoidDuplicateDescription;if(CurrentAT.location){g+="&location="+encodeURIComponent(CurrentAT.location)}g+="&searchType="+CurrentAT.searchType;g+="&maxduration=";if(CurrentAT.maxduration&&CurrentAT.maxduration>-1){g+=CurrentAT.maxduration}if(CurrentAT.counter!="0"){g+="&counter="+CurrentAT.counter;g+="&counterFormat="+CurrentAT.counterFormat}if(CurrentAT.timerOffset){if(CurrentAT.timerOffsetAfter>-1&&CurrentAT.timerOffsetBefore>-1){g+="&offset="+CurrentAT.timerOffsetBefore+","+CurrentAT.timerOffsetAfter}else{g+="&offset="}}else{g+="&offset="}if(CurrentAT.timeSpan){g+="&timespanFrom="+CurrentAT.from+"&timespanTo="+CurrentAT.to}else{g+="&timespanFrom=&timespanTo="}if(CurrentAT.timeFrame){g+="&before="+toUnixDate(CurrentAT.before)+"&after="+toUnixDate(CurrentAT.after)}else{g+="&before=&after="}if(CurrentAT.Tags&&CurrentAT.Tags.length>0){$.each(CurrentAT.Tags,function(k,l){g+="&tag="+l})}else{g+="&tag="}g+="&services=";if(CurrentAT.Channels&&CurrentAT.Channels.length>0){var h=[];$.each(CurrentAT.Channels,function(k,l){h.push(encodeURIComponent(l))});g+=h.join(",")}g+="&bouquets=";if(CurrentAT.Bouquets&&CurrentAT.Bouquets.length>0){g+=CurrentAT.Bouquets.join(",")}if(CurrentAT.Filters&&CurrentAT.Filters.length>0){$.each(CurrentAT.Filters,function(l,m){var k="&";if(m.t==="exclude"){k+="!"}k+=m.w;k+="=";if(m.w==="dayofweek"){k+=m.v}else{k+=encodeURIComponent(m.v)}g+=k})}if(!CurrentAT.vps){CurrentAT.vpo=false}g+="&vps_enabled=";g+=(CurrentAT.vps)?"1":"0";g+="&vps_overwrite=";g+=(CurrentAT.vpso)?"1":"0";g+="&series_labeling=";g+=(CurrentAT.series_labeling)?"1":"0";var e=CurrentAT.afterevent;if(e==""){e="default"}else{if(e=="none"){e="nothing"}else{if(e=="shutdown"){e="deepstandby"}}}g+="&afterevent="+e;if(e!=="default"){g+="&aftereventFrom="+CurrentAT.aftereventfrom;g+="&aftereventTo="+CurrentAT.aftereventto}if(!CurrentAT.isNew){g+="&id="+CurrentAT.id}$.ajax({type:"GET",url:g,dataType:"xml",success:function(l){var m=$(l).find("e2state").first();var k=$(l).find("e2statetext").first();showError(k.text(),m.text());readAT($("#atlist").val())},error:function(m,k,l){showError(m.responseText)}});$("#filterlist").empty()}}function checkValues(){if($("#timeSpan").is(":checked")===true){$("#timeSpanE").show()}else{$("#timeSpanE").hide()}if($("#timeSpanAE").is(":checked")===true){$("#timeSpanAEE").show()}else{$("#timeSpanAEE").hide()}if($("#timeFrame").is(":checked")===true){$("#timeFrameE").show();$("#timeFrameAfterCheckBox").show()}else{$("#timeFrameE").hide();$("#timeFrameAfterCheckBox").hide()}if($("#timerOffset").is(":checked")===true){$("#timerOffsetE").show()}else{$("#timerOffsetE").hide()}if($("#maxDuration").is(":checked")===true){$("#maxDurationE").show()}else{$("#maxDurationE").hide()}if($("#Location").is(":checked")===true){$("#LocationE").show()}else{$("#LocationE").hide()}if($("#Bouquets").is(":checked")===true){$("#BouquetsE").show()}else{$("#BouquetsE").hide()}if($("#Channels").is(":checked")===true){$("#ChannelsE").show()}else{$("#ChannelsE").hide()}if($("#Tags").is(":checked")===true){$("#TagsE").show()}else{$("#TagsE").hide()}if($("#Filter").is(":checked")===true){$(".FilterE").show()}else{$(".FilterE").hide()}if($("#afterevent").val()!=""){$("#AftereventE").show()}else{$("#AftereventE").hide()}if($("#counter").val()!="0"){$("#CounterE").show()}else{$("#CounterE").hide()}if($("#vps").is(":checked")===true){$("#vpsE").show()}else{$("#vpsE").hide()}}function getAutoTimerSettings(){$.ajax({type:"GET",url:"/autotimer/get",dataType:"xml",success:function(a){var b=[];$(a).find("e2setting").each(function(){var c=$(this).find("e2settingname").text();var d=$(this).find("e2settingvalue").text();if(c.indexOf("config.plugins.autotimer.")===0){c=c.substring(25);if(d==="True"){$("#ats_"+c).prop("checked",true)}else{if(d==="False"){$("#ats_"+c).prop("checked",false)}else{$("#ats_"+c).val(d)}}}})},error:function(c,a,b){showError(c.responseText)}})}function test_simulateAT(b){$("#simtb").append("<tr><td COLSPAN=6>"+loadspinner+"</td></tr>");var c=b?"simulate":"test";var a=b?"e2simulatedtimer":"e2testtimer";if((c==="test")&&(!CurrentAT.isNew)){c+="?id="+CurrentAT.id}else{c="simulate";a="e2simulatedtimer"}console.debug("LINK",c,a);$.ajax({type:"GET",url:"/autotimer/"+c,dataType:"xml",success:function(e){console.debug(e);var d=[];$(e).find(a).each(function(){var g="<tr>";g+="<td>"+$(this).find("e2state").text()+"</td>";g+="<td>"+$(this).find("e2autotimername").text()+"</td>";g+="<td>"+$(this).find("e2name").text()+"</td>";g+="<td>"+$(this).find("e2servicename").text()+"</td>";var l=$(this).find("e2timebegin").text();var o=new Date(Math.round(l)*1000);var k=o.getHours();var f=o.getMinutes();var n=((k>9)?"":"0")+k.toString();var j=((f>9)?"":"0")+f.toString();l=(o.getMonth()+1)+"/"+o.getDate()+"/"+o.getFullYear()+" "+n+":"+j;g+="<td>"+l+"</td>";l=$(this).find("e2timeend").text();o=new Date(Math.round(l)*1000);k=o.getHours();f=o.getMinutes();var n=((k>9)?"":"0")+k.toString();var j=((f>9)?"":"0")+f.toString();l=(o.getMonth()+1)+"/"+o.getDate()+"/"+o.getFullYear()+" "+n+":"+j;g+="<td>"+l+"</td>";g+="</tr>";console.debug(g);d.push(g)});$("#simtb").empty();$(d).each(function(f,g){$("#simtb").append(g)});if(d.length===0){$("#simtb").append("<tr><td COLSPAN=6>NO Timer found</td></tr>")}},error:function(f,d,e){showError(f.responseText)}})}function InitPage(){$("#timeSpan").click(function(){checkValues()});$("#timeSpanAE").click(function(){checkValues()});$("#timeFrame").click(function(){checkValues()});$("#timeFrameAfter").click(function(){timeFrameAfterCheck()});$("#timerOffset").click(function(){checkValues()});$("#maxDuration").click(function(){checkValues()});$("#Location").click(function(){checkValues()});$("#Bouquets").click(function(){checkValues()});$("#Channels").click(function(){checkValues()});$("#Filter").click(function(){checkValues()});$("#Tags").click(function(){checkValues()});$("#AddFilter").click(function(){AddFilter("","","")});$("#afterevent").change(function(){checkValues()});$("#counter").change(function(){checkValues()});$("#vps").change(function(){checkValues()});initValues();checkValues();getData();$(".FM").change(function(){var a=$(this).parent().parent();if($(this).val()=="dayofweek"){a.find(".FS").show();a.find(".FI").hide()}else{a.find(".FS").hide();a.find(".FI").show()}})}function delAT(){if(CurrentAT&&!CurrentAT.isNew){swal({title:tstr_del_autotimer+" ?",text:CurrentAT.name,type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:tstrings_yes_delete+" !",cancelButtonText:tstrings_no_cancel+" !",closeOnConfirm:false,closeOnCancel:false},function(a){if(a){$.ajax({type:"GET",url:"/autotimer/remove?id="+CurrentAT.id,dataType:"xml",success:function(c){var d=$(c).find("e2state").first();var b=$(c).find("e2statetext").first();showError(b.text(),d.text());readAT()},error:function(d,b,c){showError(d.responseText)}})}else{swal(tstrings_cancelled,CurrentAT.name,"error")}})}}function addAT(a){if(CurrentAT&&CurrentAT.isNew){showError("please save the current autotimer first");return}var d=1;$(atxml).find("timer").each(function(){var g=parseInt($(this).attr("id"));if(g>=d){d=g+1}});var c=tstr_timernewname;var f=d.toString();var b='<timers><timer name="'+c+'" match="'+c+'" enabled="yes" id="'+f+'" justplay="0" overrideAlternatives="1"></timer></timers>';if(typeof a!=="undefined"){b='<timers><timer name="'+a.name+'" match="'+a.name+'" enabled="yes" id="'+f+'" from="'+a.from+'" to="'+a.to+'"';b+=' searchType="exact" searchCase="sensitive" justplay="0" overrideAlternatives="1" ';b+="><e2service><e2servicereference>"+a.sref+"</e2servicereference><e2servicename>"+a.sname+"</e2servicename></e2service>";b+="</timer></timers>"}var e=$.parseXML(b);$(e).find("timer").each(function(){$("#atlist").append($("<option data-id='"+$(this).attr("id")+"' value='"+$(this).attr("id")+"' selected >"+$(this).attr("name")+"</option>"));$("#atlist").selectpicker("refresh");CurrentAT=new AutoTimerObj($(this));CurrentAT.isNew=true;CurrentAT.MustSave=true;CurrentAT.UpdateUI()});$("#atlist").find("li").each(function(){if($(this).data("id")==f){$(this).addClass("ui-selected")}else{$(this).removeClass("ui-selected")}})}function readAT(a){CurrentAT=null;$.ajax({type:"GET",url:"/autotimer",dataType:"xml",success:function(b){atxml=b;Parse(a)},error:function(d,b,c){showError(d.responseText)}})}function Parse(d){d=typeof d!=="undefined"?d:-1;$("#atlist").empty();$("#filterlist").empty();var a=[];var f=$(atxml).find("e2state").first();if(f.text()=="false"){showError($(atxml).find("e2statetext").first().text())}$(atxml).find("timer").each(function(){a.push($(this))});a.sort(function(j,g){var h=j.attr("name"),k=g.attr("name");if(h==k){return 0}return h>k?1:-1});var c="";var b=0;$(a).each(function(){var g="";if((b===0&&d===-1)||(d.toString()===$(this).attr("id").toString())){g="selected"}c+="<option data-id='"+$(this).attr("id")+"' value='"+$(this).attr("id")+"' "+g+" >"+$(this).attr("name")+"</option>";b++});$("#atlist").html(c);$("#atlist").selectpicker("refresh");if(at2add){addAT(at2add);at2add=null}else{var e=$("#atlist").val();if(e){FillAT(e)}}if(a.length>0){$("#atbutton5").show();$("#atbutton6").show()}else{$("#atbutton5").hide();$("#atbutton6").hide()}}function showError(a,b){b=typeof b!=="undefined"?b:"False";var c="error";if(b===true||b==="True"||b==="true"){c="success"}if(a!==""){swal("",a,c)}else{$("#statuscont").hide()}};